"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class P2cBalancer {
    constructor(count, offset = 0) {
        this.bins = new Array(count);
        for (let i = 0; i < this.bins.length; i++) {
            this.bins[i] = offset;
        }
    }
    pick() {
        const a = Math.trunc(Math.random() * this.bins.length);
        const b = Math.trunc(Math.random() * this.bins.length);
        const result = this.bins[a] < this.bins[b] ? a : b;
        if (this.bins[result] === Number.MAX_SAFE_INTEGER) {
            for (let i = 0; i < this.bins.length; i++) {
                this.bins[i] = 0;
            }
        }
        this.bins[result]++;
        return result;
    }
}
exports.P2cBalancer = P2cBalancer;
//# sourceMappingURL=P2cBalancer.js.map